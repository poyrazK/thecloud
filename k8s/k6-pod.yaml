apiVersion: v1
kind: Pod
metadata:
  name: k6-loadtest
  namespace: thecloud
  labels:
    app: k6-loadtest
spec:
  containers:
  - name: k6
    image: grafana/k6:latest
    command: ["sleep", "infinity"]
    resources:
      requests:
        cpu: "2000m"
        memory: "4Gi"
      limits:
        cpu: "4000m"
        memory: "8Gi"
    volumeMounts:
    - name: test-script
      mountPath: /tmp/test.js
      subPath: test.js
  volumes:
  - name: test-script
    configMap:
      name: k6-test-script
  restartPolicy: Never
